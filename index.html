
<html>
	<head>

		<title>Maquettage maggle</title>

		<script src="colpick.js" type="text/javascript"></script>
		<link rel="stylesheet" href="colpick.css" type="text/css"/>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.1/fabric.min.js"></script>
		<script src="//code.jquery.com/jquery-2.1.0.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="jscolor.js"></script>
		<link href="style.css" rel="stylesheet" media="all" type="text/css"> 
	</head>
	<body>
		<canvas id="canvas" width="600" height="300"
			style="border:1px solid #000000;">
		</canvas>

    <script>

		var canvas = new fabric.Canvas('canvas');

		canvas.backgroundColor = 'rgba(0,0,255,0.3)';
		canvas.renderAll();


		function addtext(){
		var texte = document.getElementById("texte").value;
		var police = document.getElementById("mypolice").value;
		var comicSansText = new fabric.Text(texte, {
  			fontFamily: police,
		});

		canvas.add(comicSansText);
			canvas.renderAll();

		}





		function addcustomtext(){

			var x = document.getElementById("myText").value;
		var comicSansText = new fabric.Text(x, {
  			fontFamily: 'Comic Sans',



		});

		canvas.add(comicSansText);
			canvas.renderAll();

		}



		function addcircle(){
				var x = document.getElementById("myColor").value;
			var circle = new fabric.Circle({
			top:140,
			left:230,
			radius:75,
			fill: x


		});
			canvas.add(circle);
			canvas.renderAll();
		}






		function addsquare() {


			var rect = new fabric.Rect({
            top : 100,
            left : 100,
            width : 60,
            height : 70

			});


			canvas.add(rect);
			canvas.renderAll();
		}




		function removeme() {

			var activeobject = canvas.getActiveObject();

         	canvas.remove(activeobject);
			canvas.renderAll();

		}



		backgroundColor.onchange = function() {
            canvas.getActiveObject().set("fill", 'red');
            canvas.renderAll();
        };

		function changecolor() {
		var textcolor = document.getElementById("myColor").value;
		var activeObjectcolor = canvas.getActiveObject();
        canvas.getActiveObject().setFill(textcolor);
        canvas.renderAll();

		}

		function changeSize() {
		var sizeT = document.getElementById("sizeText").value;
		var activeObjectcolor = canvas.getActiveObject();
				canvas.getActiveObject().setFontSize(sizeT);
				canvas.renderAll();

		}

		function downloadURI(uri, name) {
			var link = document.createElement("a");
  			link.download = name;
			link.href = uri;
			document.body.appendChild(link);
			link.click();
			document.body.removeChild(link);
			delete link;
		}

		function expIMG() {
			downloadURI(canvas.toDataURL(), "billet.jpeg");
		}


		function expJSON(){
			json = encodeURI(canvas.toJSON());
			window.open(json);
		}

		function changebackground(){
			var couleur = document.getElementById("myColor2");
			canvas.configure(backgroundColor = couleur);
			canvas.renderAll();
		}


</script>


    </script>

		<script>

		</script>
		<ul>
		<li>
		<button onclick="addsquare()">
			Add square
		</button>
		</li>
		<li>
		<button onclick="addcircle()">
			Add circle
		</button>
		</li>
		<li>
			votre texte <input type="text" placeholder="text" id="texte">
			choisissez la police 
			<select name="select" id="mypolice">
				<option>Arial</option>
				<option>Times new roman</option>
				<option>Simpson</option>
			</select>
		<button onclick="addtext()">
			Add Text
		</button>
		</li>
		<li>
		<button onclick="removeme()">
			Remove
		</button>
		</li>
		<li>
		Changez la couleur de l'arri√®re plan
		<input type="color" id="myColor2" class="myColor">
		<button onclick="changebackground()">
			Change Bg
		</button>
		</li>
		<li>
		<button onclick="expIMG()">
			IMAGE
		</button>
		</li>
		<li>
		<button onclick="expJSON()">
			JSON
		</button>
		</li>
		<li>
		Changez a couleur de votre texte: <input type="color" id="myColor" class="myColor">  Changer la taille de votre texte : <input type="number" id="sizeText"> <button onClick="changecolor(); changeSize()" onchange="changecolor()">Changer</button><br>
		
		</li>
		
</ul>

	<p id="demo">

	</p>



	</body>

</html>
